<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive: Full Accounting Cycle Workstation | ACCOUNTING ESSENTIALS</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght,SOFT@9..144,600,0&amp;family=Manrope:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
<link rel="stylesheet" href="../../styles.css">
    <style>
        /* Accounting Cycle Simulator Styles */
        /* Main Layout - Desktop: Multi-column, Mobile: Stacked */
        .cycle-dashboard {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        /* Top Section: Journal Entry - Full Width */
        .journal-section {
            background: var(--bg-light);
            padding: 1.5rem;
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
        }

        /* Middle Section: Transactions + Ledger - Side by Side on Desktop */
        .workspace-grid {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 1.5rem;
            min-height: 500px;
        }

        @media (max-width: 1100px) {
            .workspace-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Transaction Queue Panel */
        .transaction-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            display: flex;
            flex-direction: column;
            max-height: 600px;
            overflow-y: auto;
        }

        .transaction-panel h2 {
            margin: 0 0 1rem;
            color: white;
            font-size: 1.25rem;
        }

        .transaction-panel h3 {
            color: var(--secondary);
            font-size: 1rem;
            margin: 0 0 0.75rem;
        }

        /* Ledger Panel */
        .ledger-panel {
            background: var(--white);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            max-height: 600px;
            overflow-y: auto;
        }

        .ledger-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(450px, 1fr));
            gap: 1.5rem;
        }

        @media (max-width: 1100px) {
            .ledger-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Bottom Section: Trial Balance - Full Width */
        .trial-balance-section {
            background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
            color: #2c3e50;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            margin-top: 1rem;
        }

        .trial-balance-section h2 {
            margin: 0 0 1rem;
            color: white;
        }

        /* Journal Header */
        .journal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-light);
        }

        .journal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-light);
        }

        .journal-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }

        .journal-totals {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .total-box {
            text-align: center;
            padding: 0.5rem 1rem;
            background: var(--white);
            border-radius: var(--radius-sm);
            border: 2px solid var(--border-light);
        }

        .total-box strong {
            color: var(--primary);
        }

        /* Entry Form */
        .entry-form {
            background: var(--white);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: 1.25rem;
            margin-bottom: 0.75rem;
        }

        .entry-header {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .entry-header label {
            grid-column: span 1;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .entry-header input,
        .entry-header select {
            grid-column: span 1;
            padding: 0.625rem 0.75rem;
            border: 2px solid var(--border-light);
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            font-family: inherit;
            min-width: 120px;
        }

        .entry-header button {
            grid-column: span 2;
            padding: 0.625rem 1.25rem;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
        }

        .entry-header label {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .entry-header input,
        .entry-header select {
            padding: 0.625rem 0.75rem;
            border: 2px solid var(--border-light);
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            font-family: inherit;
        }

        .entry-header input:focus,
        .entry-header select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(26, 35, 126, 0.1);
        }

        .entry-header button {
            padding: 0.625rem 1.25rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, opacity 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, filter 0.3s ease;
        }

        .entry-header button:hover {
            background: var(--primary-light);
        }

        .entry-header button:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
        }

        /* Transaction Queue */
        .transaction-queue {
            background: var(--white);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .transaction-item {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-light);
            cursor: pointer;
            transition: transform 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, filter 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .transaction-item:hover {
            background: var(--primary-light);
        }

        .transaction-item.completed {
            background: var(--success-light);
            opacity: 0.6;
            text-decoration: line-through;
        }

        .tx-number {
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .tx-desc {
            flex: 1;
            font-size: 0.9rem;
        }

        /* Ledger View */
        .ledger-section {
            background: var(--white);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: 1.5rem;
        }

        .ledger-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(400px, 1fr));
            gap: 1.5rem;
        }

        @media (max-width: 1100px) {
            .ledger-grid {
                grid-template-columns: 1fr;
            }
        }

        .t-account {
            border: 2px solid var(--primary);
            border-radius: var(--radius-sm);
            overflow: hidden;
            font-size: 0.9rem;
        }

        .t-account-header {
            background: var(--primary);
            color: white;
            padding: 0.5rem 0.75rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            font-size: 0.95rem;
        }

        .t-account-body {
            display: flex;
            min-height: 80px;
        }

        .t-account-side {
            flex: 1;
            min-width: 120px;
        }

        .t-account-side.debit {
            background: rgba(26, 35, 126, 0.05);
        }

        .t-account-side.credit {
            background: rgba(231, 76, 60, 0.05);
        }

        .t-side-header {
            text-align: center;
            padding: 0.35rem;
            font-weight: 600;
            font-size: 0.8rem;
            border-bottom: 1px solid var(--primary);
        }

        .t-side-header.debit {
            background: var(--primary);
            color: white;
        }

        .t-side-header.credit {
            background: var(--error);
            color: white;
        }

        .t-entries {
            min-height: 60px;
            padding: 0.5rem;
            font-size: 0.8rem;
        }

        .t-entry {
            display: flex;
            justify-content: space-between;
            padding: 0.25rem 0;
            font-size: 0.8rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .t-entry.debit-side {
            border-left: 3px solid var(--primary);
            padding-left: 0.5rem;
        }

        .t-entry.credit-side {
            border-right: 3px solid var(--error);
            padding-right: 0.5rem;
        }

        .t-balance {
            text-align: center;
            padding: 0.5rem;
            font-weight: 700;
            border-top: 2px solid var(--secondary);
            background: rgba(197, 160, 50, 0.1);
            font-size: 0.85rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .t-balance.negative {
            color: var(--error);
        }

        .t-balance.positive {
            color: var(--success);
        }

        /* Trial Balance */
        .trial-balance-section {
            background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            margin-top: 1rem;
        }

        .trial-balance-section .trial-table {
            color: #2c3e50;
            background: white;
            border-radius: var(--radius-sm);
            overflow: hidden;
        }

        .trial-balance-section .trial-table th {
            background: var(--primary);
            color: white;
            padding: 0.75rem 0.5rem;
            text-align: left;
            border-bottom: 2px solid var(--border-light);
        }

        .trial-balance-section .trial-table td {
            padding: 0.5rem 0.75rem;
            border-bottom: 1px solid var(--border-light);
            color: #2c3e50;
        }

        .trial-balance-section .trial-table .total-row td {
            font-weight: 700;
            border-top: 3px solid var(--primary);
            background: var(--bg-light);
        }

        .trial-balance-section h2 {
            margin: 0 0 1rem;
            color: white;
        }

        /* Trial table base styles - overridden in trial-balance-section */

        .trial-status {
            text-align: center;
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: var(--radius-sm);
            font-weight: 600;
        }

        .trial-status.balanced {
            background: var(--success-light);
            color: var(--success);
            border: 2px solid var(--success);
        }

        .trial-status.unbalanced {
            background: var(--error-light);
            color: var(--error);
            border: 2px solid var(--error);
        }

        /* Animations */
        .animate-flash {
            animation: flash 0.5s ease;
        }

        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-50MTQPVR7D"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-50MTQPVR7D');
</script>
    <link rel="stylesheet" href="../../theme-redesign.css">
</head>

<body class="course-redesign">
        <a href="#main-content" class="skip-link">Skip to main content</a>
<canvas id="global-bg-canvas"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: var(--bg-light); pointer-events: none;"></canvas>

    <header>
        <div class="container nav-container">
            <a href="../../index.html" class="logo">ACCOUNTING<span>ESSENTIALS</span></a>
            <nav class="nav-links">
                <a href="../../index.html">Home</a>
                <a href="../part1.html">Part 1</a>
                <a href="../../part2/part2.html">Part 2</a>
                <a href="../../part3/part3.html">Part 3</a>
            </nav>
        </div>
    </header>

    <main class="container" id="main-content">
        <div class="breadcrumbs">
            <a href="../../index.html">Home</a> <span>/</span> <a href="../part1.html">Part 1</a> <span>/</span> <a href="ch02.html">Chapter 2</a> <span>/</span> Interactive
        </div>

        <article class="animate-fade-in">
            <h1 style="border-left: 8px solid var(--accent); padding-left: 1rem; margin: 2rem 0;">üîÑ Full Accounting Cycle Workstation</h1>

            <div class="cycle-dashboard">
                <!-- Main Panel: Journal + Trial Balance -->
                <div class="main-panel">
                    <div class="journal-section">
                        <div class="journal-header">
                            <h3>üìù Journal Entry Workstation</h3>
                            <div class="journal-totals">
                                <div class="total-box">
                                    <div>Debit Total</div>
                                    <div><strong id="debit-total">$0</strong></div>
                                </div>
                                <div class="total-box">
                                    <div>Credit Total</div>
                                    <div><strong id="credit-total">$0</strong></div>
                                </div>
                            </div>
                        </div>

                        <form id="journal-form">
                            <div class="entry-header">
                                <label>Date</label>
                                <input type="date" id="entry-date" required>

                                <label>Account</label>
                                <select id="entry-account" required>
                                    <option value="">Select Account</option>
                                    <optgroup label="Assets">
                                        <option value="Cash">Cash</option>
                                        <option value="Accounts Receivable">Accounts Receivable</option>
                                        <option value="Supplies">Supplies</option>
                                        <option value="Equipment">Equipment</option>
                                        <option value="Furniture">Furniture</option>
                                        <option value="Building">Building</option>
                                        <option value="Land">Land</option>
                                        <option value="Inventory">Inventory</option>
                                        <option value="Prepaid Insurance">Prepaid Insurance</option>
                                    </optgroup>
                                    <optgroup label="Liabilities">
                                        <option value="Accounts Payable">Accounts Payable</option>
                                        <option value="Notes Payable">Notes Payable</option>
                                        <option value="Salaries Payable">Salaries Payable</option>
                                        <option value="Utilities Payable">Utilities Payable</option>
                                        <option value="Unearned Revenue">Unearned Revenue</option>
                                        <option value="Interest Payable">Interest Payable</option>
                                    </optgroup>
                                    <optgroup label="Equity">
                                        <option value="Owner's Equity">Owner's Equity</option>
                                        <option value="Owner's Drawings">Owner's Drawings</option>
                                        <option value="Retained Earnings">Retained Earnings</option>
                                        <option value="Common Stock">Common Stock</option>
                                    </optgroup>
                                    <optgroup label="Revenue">
                                        <option value="Service Revenue">Service Revenue</option>
                                        <option value="Sales Revenue">Sales Revenue</option>
                                        <option value="Interest Revenue">Interest Revenue</option>
                                        <option value="Rent Revenue">Rent Revenue</option>
                                    </optgroup>
                                    <optgroup label="Expenses">
                                        <option value="Rent Expense">Rent Expense</option>
                                        <option value="Salaries Expense">Salaries Expense</option>
                                        <option value="Wages Expense">Wages Expense</option>
                                        <option value="Utilities Expense">Utilities Expense</option>
                                        <option value="Supplies Expense">Supplies Expense</option>
                                        <option value="Insurance Expense">Insurance Expense</option>
                                        <option value="Advertising Expense">Advertising Expense</option>
                                        <option value="Maintenance Expense">Maintenance Expense</option>
                                        <option value="Depreciation Expense">Depreciation Expense</option>
                                        <option value="Interest Expense">Interest Expense</option>
                                        <option value="Telephone Expense">Telephone Expense</option>
                                        <option value="Travel Expense">Travel Expense</option>
                                        <option value="Office Expense">Office Expense</option>
                                    </optgroup>
                                </select>

                                <label>Type</label>
                                <select id="entry-type" required>
                                    <option value="debit">Debit</option>
                                    <option value="credit">Credit</option>
                                </select>

                                <label>Amount</label>
                                <input type="number" id="entry-amount" placeholder="0.00" step="0.01" min="0" required>

                                <button type="submit" id="btn-add-entry" style="background: var(--primary); color: white; padding: 0.5rem 1rem; border: none; border-radius: var(--radius-sm); cursor: pointer;">Add Entry</button>
                                <button type="button" id="btn-clear" style="background: var(--text-muted); color: white; padding: 0.5rem 1rem; border: none; border-radius: var(--radius-sm); cursor: pointer;">Clear Form</button>
                            </div>
                        </form>

                        <!-- Transaction Queue - Now moved to side panel -->
                        <h4 style="margin: 1rem 0; color: var(--text-muted);">Select transactions from the queue on the right ‚Üí</h4>

                        <!-- Ledger View -->
                        <h4 style="margin: 1.5rem 0; color: var(--text-muted);">Ledger Accounts</h4>
                        <div class="ledger-section">
                            <div class="ledger-grid" id="ledger-grid">
                                <!-- T-accounts will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Side Panel: Instructions + Trial Balance -->
                    <div class="side-panel">
                        <h2>üìã Transaction Queue</h2>
                        <p style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 1rem;">
                            Select transactions from the queue to process. You'll see each transaction post to the ledger accounts in real-time.
                        </p>

                        <h3>Available Transactions</h3>
                        <div id="available-transactions" style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <!-- Transaction 1 -->
                            <div class="transaction-item" data-id="1" onclick="selectTransaction(1)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">1</span>
                                <span class="tx-desc">2026-01-03 - Owner invested $25,000 cash in business</span>
                            </div>
                            <!-- Transaction 2 -->
                            <div class="transaction-item" data-id="2" onclick="selectTransaction(2)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">2</span>
                                <span class="tx-desc">2026-01-05 - Purchased computer equipment, paid $15,000 cash</span>
                            </div>
                            <!-- Transaction 3 -->
                            <div class="transaction-item" data-id="3" onclick="selectTransaction(3)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">3</span>
                                <span class="tx-desc">2026-01-08 - Billed client for services, $8,000 on account</span>
                            </div>
                            <!-- Transaction 4 -->
                            <div class="transaction-item" data-id="4" onclick="selectTransaction(4)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">4</span>
                                <span class="tx-desc">2026-01-10 - Paid January rent $3,000</span>
                            </div>
                            <!-- Transaction 5 -->
                            <div class="transaction-item" data-id="5" onclick="selectTransaction(5)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">5</span>
                                <span class="tx-desc">2026-01-15 - Performed services, received $12,000 cash</span>
                            </div>
                            <!-- Transaction 6 -->
                            <div class="transaction-item" data-id="6" onclick="selectTransaction(6)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">6</span>
                                <span class="tx-desc">2026-01-20 - Paid employee salaries $4,000</span>
                            </div>
                            <!-- Transaction 7 -->
                            <div class="transaction-item" data-id="7" onclick="selectTransaction(7)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">7</span>
                                <span class="tx-desc">2026-01-25 - Purchased office supplies $600 cash</span>
                            </div>
                            <!-- Transaction 8 -->
                            <div class="transaction-item" data-id="8" onclick="selectTransaction(8)" role="button" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}">
                                <span class="tx-number">8</span>
                                <span class="tx-desc">2026-01-28 - Paid utilities $800 cash</span>
                            </div>
                        </div>

                        <div style="margin-top: 2rem;">
                            <h3>Account Balances Summary</h3>
                            <div style="background: rgba(255,255,255,0.15); padding: 1rem; border-radius: var(--radius-sm); font-size: 0.9rem;">
                                <p><strong>Cash:</strong> $<span id="summary-cash">0</span></p>
                                <p><strong>Accounts Receivable:</strong> $<span id="summary-ar">0</span></p>
                                <p><strong>Service Revenue:</strong> $<span id="summary-revenue">0</span></p>
                                <p><strong>Expenses:</strong> $<span id="summary-expenses">0</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Trial Balance Section -->
                    <div class="trial-balance-section">
                        <h2>üìä Trial Balance</h2>
                        <p style="opacity: 0.9; margin-bottom: 1rem;">
                            The trial balance shows that total debits equal total credits. Generate entries, post to ledger, then prepare trial balance.
                        </p>

                        <table class="trial-table">
                            <thead>
                                <tr>
                                    <th>Account</th>
                                    <th>Debit</th>
                                    <th>Credit</th>
                                    <th>Balance</th>
                                </tr>
                            </thead>
                            <tbody id="trial-body">
                                <!-- Trial balance rows will be populated -->
                            </tbody>
                            <tfoot>
                                <tr class="total-row">
                                    <td style="text-align: right;" colspan="2"><strong>Totals</strong></td>
                                    <td><strong id="trial-debit-total">$0</strong></td>
                                    <td><strong id="trial-credit-total">$0</strong></td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>

                        <div class="trial-status" id="trial-status">
                            Add entries to generate trial balance
                        </div>

                        <button class="btn" style="background: var(--white); color: var(--primary); border: 2px solid var(--primary); margin-top: 1.5rem; width: 100%;" onclick="resetCycle()">
                            Reset Cycle
                        </button>
                    </div>
                </div>
            </div>
        </article>

        <script src="../../components.js"></script>
        <script>
            // ==================== Accounting Cycle Workstation ====================
            
            // Available transactions to process
            const availableTransactions = [
                {
                    id: 1,
                    date: '2026-01-03',
                    desc: 'Owner invested $25,000 cash in business',
                    account: 'Owner\'s Equity',
                    type: 'credit',
                    amount: 25000
                },
                {
                    id: 2,
                    date: '2026-01-05',
                    desc: 'Purchased computer equipment, paid $15,000 cash',
                    account: 'Equipment',
                    type: 'debit',
                    amount: 15000
                },
                {
                    id: 3,
                    date: '2026-01-08',
                    desc: 'Billed client for services, $8,000 on account',
                    account: 'Accounts Receivable',
                    type: 'debit',
                    amount: 8000
                },
                {
                    id: 4,
                    date: '2026-01-10',
                    desc: 'Paid January rent $3,000',
                    account: 'Rent Expense',
                    type: 'credit',
                    amount: 3000
                },
                {
                    id: 5,
                    date: '2026-01-15',
                    desc: 'Performed services, received $12,000 cash',
                    account: 'Cash',
                    type: 'debit',
                    amount: 12000
                },
                {
                    id: 6,
                    date: '2026-01-20',
                    desc: 'Paid employee salaries $4,000',
                    account: 'Salaries Expense',
                    type: 'debit',
                    amount: 4000
                },
                {
                    id: 7,
                    date: '2026-01-25',
                    desc: 'Purchased office supplies $600 cash',
                    account: 'Supplies',
                    type: 'debit',
                    amount: 600
                },
                {
                    id: 8,
                    date: '2026-01-28',
                    desc: 'Paid utilities $800 cash',
                    account: 'Utilities Expense',
                    type: 'debit',
                    amount: 800
                }
            ];

            let processedTransactions = [];
            let completedTransactionIds = [];
            let selectedTransaction = null;

            // Ledger balances
            const ledger = {
                // Assets
                'Cash': { debit: 0, credit: 0 },
                'Accounts Receivable': { debit: 0, credit: 0 },
                'Supplies': { debit: 0, credit: 0 },
                'Equipment': { debit: 0, credit: 0 },
                'Furniture': { debit: 0, credit: 0 },
                'Building': { debit: 0, credit: 0 },
                'Land': { debit: 0, credit: 0 },
                'Inventory': { debit: 0, credit: 0 },
                'Prepaid Insurance': { debit: 0, credit: 0 },
                // Liabilities
                'Accounts Payable': { debit: 0, credit: 0 },
                'Notes Payable': { debit: 0, credit: 0 },
                'Salaries Payable': { debit: 0, credit: 0 },
                'Utilities Payable': { debit: 0, credit: 0 },
                'Unearned Revenue': { debit: 0, credit: 0 },
                'Interest Payable': { debit: 0, credit: 0 },
                // Equity
                'Owner\'s Equity': { debit: 0, credit: 0 },
                'Owner\'s Drawings': { debit: 0, credit: 0 },
                'Retained Earnings': { debit: 0, credit: 0 },
                'Common Stock': { debit: 0, credit: 0 },
                // Revenue
                'Service Revenue': { debit: 0, credit: 0 },
                'Sales Revenue': { debit: 0, credit: 0 },
                'Interest Revenue': { debit: 0, credit: 0 },
                'Rent Revenue': { debit: 0, credit: 0 },
                // Expenses
                'Rent Expense': { debit: 0, credit: 0 },
                'Salaries Expense': { debit: 0, credit: 0 },
                'Wages Expense': { debit: 0, credit: 0 },
                'Utilities Expense': { debit: 0, credit: 0 },
                'Supplies Expense': { debit: 0, credit: 0 },
                'Insurance Expense': { debit: 0, credit: 0 },
                'Advertising Expense': { debit: 0, credit: 0 },
                'Maintenance Expense': { debit: 0, credit: 0 },
                'Depreciation Expense': { debit: 0, credit: 0 },
                'Interest Expense': { debit: 0, credit: 0 },
                'Telephone Expense': { debit: 0, credit: 0 },
                'Travel Expense': { debit: 0, credit: 0 },
                'Office Expense': { debit: 0, credit: 0 }
            };

            // Journal totals
            let currentDebitTotal = 0;
            let currentCreditTotal = 0;

            function init() {
                renderAvailableTransactions();
                updateAccountBalances();
                updateJournalTotals();
                updateTrialBalance();
            }

            function renderAvailableTransactions() {
                // Don't re-render the list - it's already in HTML
                // Just update completed status
                availableTransactions.forEach((tx) => {
                    const item = document.querySelector('.transaction-item[data-id="' + tx.id + '"');
                    if (item) {
                        const isProcessed = completedTransactionIds.includes(tx.id);
                        if (isProcessed) {
                            item.classList.add('completed');
                            item.removeAttribute('onclick');
                        } else {
                            item.classList.remove('completed');
                            item.setAttribute('onclick', 'selectTransaction(' + tx.id + ')');
                        }
                    }
                });
            }

            function selectTransaction(txId) {
                // Find transaction by ID
                if (typeof txId === 'number') {
                    selectedTransaction = availableTransactions.find(t => t.id === txId);
                } else {
                    selectedTransaction = txId;
                }
                
                if (!selectedTransaction) {
                    console.error('Transaction not found:', txId);
                    return;
                }
                
                // Update visual selection
                document.querySelectorAll('.transaction-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                const selectedElement = document.querySelector('.transaction-item[data-id="' + selectedTransaction.id + '"');
                if (selectedElement) {
                    selectedElement.classList.add('active');
                }
                
                // Auto-fill the form with transaction data
                document.getElementById('entry-date').value = selectedTransaction.date;
                document.getElementById('entry-account').value = selectedTransaction.account;
                document.getElementById('entry-type').value = selectedTransaction.type;
                document.getElementById('entry-amount').value = selectedTransaction.amount;
                
                console.log('Selected transaction:', selectedTransaction);
            }

            function addJournalEntry() {
                const date = document.getElementById('entry-date').value;
                const account = document.getElementById('entry-account').value;
                const type = document.getElementById('entry-type').value;
                const amount = parseFloat(document.getElementById('entry-amount').value);

                if (!date || !account || !type || !amount || amount <= 0) {
                    alert('Please fill in all fields with a valid amount.');
                    return;
                }

                // Validate account type matches debit/credit
                const debitAccounts = ['Cash', 'Accounts Receivable', 'Supplies', 'Equipment', 'Furniture', 'Building', 'Land', 'Inventory', 'Prepaid Insurance'];
                const creditAccounts = ['Accounts Payable', 'Notes Payable', 'Salaries Payable', 'Utilities Payable', 'Unearned Revenue', 'Interest Payable', 'Owner\'s Equity', 'Owner\'s Drawings', 'Retained Earnings', 'Common Stock', 'Service Revenue', 'Sales Revenue', 'Interest Revenue', 'Rent Revenue'];
                const expenseAccounts = ['Rent Expense', 'Salaries Expense', 'Wages Expense', 'Utilities Expense', 'Supplies Expense', 'Insurance Expense', 'Advertising Expense', 'Maintenance Expense', 'Depreciation Expense', 'Interest Expense', 'Telephone Expense', 'Travel Expense', 'Office Expense'];
                
                // Assets and Expenses increase with debit, decrease with credit
                // Liabilities, Equity, and Revenue increase with credit, decrease with debit
                let isValid = true;
                let expectedType = '';
                
                if (debitAccounts.includes(account) || expenseAccounts.includes(account)) {
                    // For assets and expenses: increase with debit (for simplicity, we assume user is recording increase)
                    expectedType = 'debit';
                } else if (creditAccounts.includes(account)) {
                    // For liabilities, equity, revenue: increase with credit (for simplicity, we assume user is recording increase)
                    expectedType = 'credit';
                }
                
                if (type !== expectedType) {
                    const accountCategory = debitAccounts.includes(account) ? 'Asset' : 
                                          creditAccounts.includes(account) ? (account.includes('Revenue') ? 'Revenue' : account.includes('Expense') ? 'Expense' : account.includes('Payable') ? 'Liability' : 'Equity') : 
                                          'Expense';
                    alert(`Type is incorrect! ${account} is a ${accountCategory} account which typically uses ${expectedType.toUpperCase()} to increase.\n\nPlease change the type to ${expectedType.toUpperCase()} to record an increase, or if you're recording a decrease, you may need to use the opposite type.`);
                    return;
                }

                // Create journal entry
                const entry = {
                    id: processedTransactions.length + 1,
                    date: date,
                    account: account,
                    type: type,
                    amount: amount,
                    referenceTransaction: selectedTransaction ? selectedTransaction.id : null
                };

                processedTransactions.push(entry);

                // Post to ledger
                if (type === 'debit') {
                    ledger[account].debit += amount;
                } else {
                    ledger[account].credit += amount;
                }

                // Mark original transaction as processed (only if selected from queue)
                if (selectedTransaction && !completedTransactionIds.includes(selectedTransaction.id)) {
                    completedTransactionIds.push(selectedTransaction.id);
                }

                // Update UI
                clearForm();
                renderAvailableTransactions();
                updateAccountBalances();
                updateJournalTotals();
                updateTrialBalance();
                renderLedger();
            }

            function clearForm() {
                document.getElementById('entry-date').value = '';
                document.getElementById('entry-account').value = '';
                document.getElementById('entry-type').value = '';
                document.getElementById('entry-amount').value = '';
                selectedTransaction = null;
                document.querySelectorAll('.transaction-item').forEach(item => {
                    item.classList.remove('active');
                });
            }

            function updateAccountBalances() {
                document.getElementById('summary-cash').textContent = calculateBalance('Cash').toLocaleString();
                document.getElementById('summary-ar').textContent = calculateBalance('Accounts Receivable').toLocaleString();
                document.getElementById('summary-revenue').textContent = calculateBalance('Service Revenue').toLocaleString();
                document.getElementById('summary-expenses').textContent = (
                    calculateBalance('Rent Expense') + 
                    calculateBalance('Salaries Expense')
                ).toLocaleString();
            }

            function calculateBalance(account) {
                return ledger[account].debit - ledger[account].credit;
            }

            function updateJournalTotals() {
                let debitTotal = 0;
                let creditTotal = 0;

                Object.keys(ledger).forEach(acc => {
                    debitTotal += ledger[acc].debit;
                    creditTotal += ledger[acc].credit;
                });

                document.getElementById('debit-total').textContent = '$' + debitTotal.toLocaleString();
                document.getElementById('credit-total').textContent = '$' + creditTotal.toLocaleString();
                currentDebitTotal = debitTotal;
                currentCreditTotal = creditTotal;
            }

            function updateTrialBalance() {
                const tbody = document.getElementById('trial-body');
                tbody.innerHTML = '';

                const accounts = Object.keys(ledger).filter(acc => ledger[acc].debit !== 0 || ledger[acc].credit !== 0);

                accounts.forEach(acc => {
                    const balance = calculateBalance(acc);
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${acc}</td>
                        <td>${ledger[acc].debit > 0 ? '$' + ledger[acc].debit.toLocaleString() : ''}</td>
                        <td>${ledger[acc].credit > 0 ? '$' + ledger[acc].credit.toLocaleString() : ''}</td>
                        <td style="text-align: center;"><strong>$${balance.toLocaleString()}</strong></td>
                    `;
                    tbody.appendChild(row);
                });

                const isBalanced = Math.abs(currentDebitTotal - currentCreditTotal) < 0.01;
                const status = document.getElementById('trial-status');

                if (isBalanced) {
                    status.className = 'trial-status balanced';
                    status.innerHTML = '<strong>‚úì Trial Balance is Balanced!</strong><br><span style="font-size: 0.9rem;">Debits equal credits</span>';
                } else if (processedTransactions.length > 0) {
                    status.className = 'trial-status unbalanced';
                    const diff = Math.abs(currentDebitTotal - currentCreditTotal);
                    status.innerHTML = `<strong>‚úó Unbalanced by $${diff.toLocaleString()}</strong><br><span style="font-size: 0.9rem;">Add more entries to balance</span>`;
                }
            }

            function renderLedger() {
                const grid = document.getElementById('ledger-grid');
                grid.innerHTML = '';

                const activeAccounts = Object.keys(ledger).filter(acc => ledger[acc].debit !== 0 || ledger[acc].credit !== 0);

                if (activeAccounts.length === 0) {
                    grid.innerHTML = '<p style="text-align: center; color: var(--text-muted);">No entries posted yet. Add journal entries to see ledger.</p>';
                    return;
                }

                activeAccounts.forEach(acc => {
                    const balance = calculateBalance(acc);
                    const isPositive = balance > 0;

                    const tAccount = document.createElement('div');
                    tAccount.className = 't-account';
                    tAccount.innerHTML = `
                        <div class="t-account-header">
                            <span>${acc}</span>
                        </div>
                        <div class="t-account-body">
                            <div class="t-account-side debit">
                                <div class="t-side-header debit">Debit</div>
                                <div class="t-entries" id="${acc}-debit">
                                    ${ledger[acc].debit > 0 ? 
                                        '<div class="t-entry debit-side">$' + ledger[acc].debit.toLocaleString() + '</div>' : 
                                        '<div style="color: var(--text-muted); opacity: 0.5;">-</div>'}
                                </div>
                            </div>
                            <div class="t-account-side credit">
                                <div class="t-side-header credit">Credit</div>
                                <div class="t-entries" id="${acc}-credit">
                                    ${ledger[acc].credit > 0 ? 
                                        '<div class="t-entry credit-side">$' + ledger[acc].credit.toLocaleString() + '</div>' : 
                                        '<div style="color: var(--text-muted); opacity: 0.5;">-</div>'}
                                </div>
                            </div>
                            <div class="t-balance ${isPositive ? 'positive' : 'negative'}">
                                <strong>${isPositive ? '+' : ''}$${balance.toLocaleString()}</strong>
                            </div>
                        </div>
                    `;
                    grid.appendChild(tAccount);
                });
            }

            function resetCycle() {
                // Reset ledger
                Object.keys(ledger).forEach(acc => {
                    ledger[acc] = { debit: 0, credit: 0 };
                });

                processedTransactions = [];
                completedTransactionIds = [];
                clearForm();

                // Reset UI
                renderAvailableTransactions();
                updateAccountBalances();
                updateJournalTotals();
                updateTrialBalance();
                renderLedger();
            }

            // Form submit handler
            document.getElementById('journal-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addJournalEntry();
            });

            // Initialize on page load
            document.addEventListener('DOMContentLoaded', init);
        </script>
    <script src="../../theme-redesign.js"></script>
</body>

</html>
